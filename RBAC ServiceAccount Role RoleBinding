RBAC ServiceAccount Role RoleBinding Solve this question on: ssh cka3962 processor in Namespace project-hamster . Create a Role and RoleBinding, both named Create a new ServiceAccount as well. These should allow the new SA to only create Secrets and ConfigMaps in that Namespace. 


apiVersion: v1
kind: ServiceAccount
metadata:
  name: processor
  namespace: project-hamster



apiVersion: rbac.authorization.k8s.io/v1
kind: Role
metadata:
  name: processor
  namespace: project-hamster
rules:
- apiGroups: [""]
  resources:
  - secrets
  - configmaps
  verbs:
  - create



apiVersion: rbac.authorization.k8s.io/v1
kind: RoleBinding
metadata:
  name: processor
  namespace: project-hamster
roleRef:
  apiGroup: rbac.authorization.k8s.io
  kind: Role
  name: processor
subjects:
- kind: ServiceAccount
  name: processor
  namespace: project-hamster


##############################
create service account ,role,rolebindings
kubectl -n project-hamster create sa processor


kubectl -n project-hamster create role -h
kubectl -n project-hamster create role processor \
  --verb=create \
  --resource=secret \
  --resource=configmap



kubectl -n project-hamster create rolebinding processor \
  --role=processor \
  --serviceaccount=project-hamster:processor


#########################################
Testing RBAC permission 
kubectl auth can-i <verb> <resource> --as <user/serviceaccount>

Test 1
kubectl -n project-hamster auth can-i create secret \
  --as system:serviceaccount:project-hamster:processor
